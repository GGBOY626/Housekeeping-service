{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../../develop/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<!-- 首页 -->\n<template>\n  <view class=\"homePage\">\n    <NavBar title=\"云岚到家\" :isShowBack=\"false\"></NavBar>\n    <view class=\"homeBox\">\n      <view class=\"input-view\">\n        <view @click=\"toCity()\" class=\"city\">\n          <image src=\"/static/dw.png\" mode=\"scaleToFill\" />\n          <view class=\"address\">{{ city.name ? city.name : '暂无' }}</view>\n        </view>\n        <image src=\"/static/ss.png\" mode=\"scaleToFill\" class=\"input-uni-icon\" />\n        <input\n          confirm-type=\"search\"\n          class=\"nav-bar-input\"\n          type=\"text\"\n          v-model=\"searchVal\"\n          placeholder=\"日常保洁\"\n          disabled\n          @focus=\"handleSearch\"\n          @confirm=\"handleSearch\"\n          @click=\"handleSearch\"\n          @input=\"handleSearch\"\n          placeholder-style=\"color:#ccc ; font-size: 28rpx; align-items: center;margin-top: 3rpx;\"\n        />\n      </view>\n      <image src=\"/static/banner.png\" mode=\"scaleToFill\" class=\"homeBanner\" />\n      <view class=\"tips\">\n        <view>\n          <image src=\"/static/smile.png\" mode=\"scaleToFill\" />\n          <test> 云岚到家平台，给你贴心的 专业的上门服务 </test>\n        </view>\n        <view>\n          <image src=\"/static/yuan.png\" mode=\"scaleToFill\" />\n          <test> 标准定价 售后无忧 </test>\n        </view>\n      </view>\n      <!-- 未选择城市或者城市下无服务时的显示 -->\n      <view class=\"empty-box\" v-if=\"!city.name || menuData.length === 0\">\n        <image src=\"../../static/zwnr@2x.png\"></image>\n        <view v-if=\"!city.name\">\n          用户当前未授权位置，请手动选择城市进行下单\n        </view>\n        <view v-else> 当前城市暂未开通服务，请切换其他城市进行下单 </view>\n        <button class=\"agree-btn btn\" @click=\"toCity()\">\n          手动选择服务城市\n        </button>\n      </view>\n\n      <view class=\"menu\">\n        <view class=\"leftBox\">\n          <view\n            class=\"left\"\n            @click=\"toService(item.serveTypeId, 1)\"\n            v-for=\"(item, index) in menuData\"\n            :key=\"index\"\n          >\n            <image :src=\"item.serveTypeIcon\" mode=\"scaleToFill\" />\n            <view>{{ item.serveTypeName }}</view>\n          </view>\n        </view>\n        <view class=\"rightBox\">\n          <view class=\"rights\" v-for=\"(item, index) in menuData\" :key=\"index\">\n            <view class=\"leftLine\"></view>\n            <view class=\"right\">\n              <view\n                class=\"card\"\n                v-for=\"(content, key) in item.serveResDTOList\"\n                :key=\"key\"\n                @click=\"toService(content.id, 2)\"\n              >\n                <image :src=\"content.serveItemIcon\" mode=\"scaleToFill\" />\n                <view>{{ content.serveItemName }}</view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"title\" v-if=\"hotData.length > 0\">\n        <image src=\"/static/biao.png\" mode=\"scaleToFill\" />\n        精选推荐\n      </view>\n      <view class=\"recommend\">\n        <view class=\"card\" v-for=\"(item, index) in hotData\" :key=\"index\">\n          <view\n            class=\"tag\"\n            :class=\"\n              (index + 1) % 3 === 1\n                ? 'tag1'\n                : (index + 1) % 3 === 2\n                ? 'tag2'\n                : 'tag3'\n            \"\n            >{{\n              // (index + 1)/3 取余数\n              (index + 1) % 3 === 1\n                ? '专业、贴心的上门服务'\n                : (index + 1) % 3 === 2\n                ? '标准定价，售后无忧'\n                : '云岚到家，您的不二选择'\n            }}</view\n          >\n          <image\n            :src=\"item.serveItemImg\"\n            mode=\"scaleToFill\"\n            class=\"cardImg\"\n            @click=\"toService(item.id, 2)\"\n          />\n          <view class=\"cardName\">{{ item.serveItemName }}</view>\n          <view class=\"reservation\">\n            <view\n              >￥<test>{{ item.price }}</test></view\n            >\n            <button @click=\"toService(item.id, 2)\">立即预约</button>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view class=\"foot\">\n      <button @click=\"toLogin\" class=\"agree-btn btn\" v-if=\"false\">登录</button>\n      <button @click=\"toEvaluate\" class=\"agree-btn btn\" v-if=\"false\">\n        评价\n      </button>\n    </view>\n    <!-- footer -->\n    <UniFooter :pagePath=\"'/pages/index/index'\"></UniFooter>\n    <!-- end -->\n    <!-- 悬浮球 -->\n    <ExpBall></ExpBall>\n    <!-- end -->\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onShow, onPullDownRefresh } from '@dcloudio/uni-app';\nimport { getHomeService, getHotServe } from '../api/index.js';\nimport ExpBall from '../../components/expBall/ExpBall.vue';\nconst nickName = ref(''); //昵称\nconst token = ref(''); //token\nconst menuData = ref([]); //菜单数据\nconst hotData = ref([]); //热门服务数据\nconst searchVal = ref(''); //搜索框的值\nconst city = ref({}); //城市\n\nonShow(() => {\n  // 获取nickName\n  nickName.value = uni.getStorageSync('nickName');\n  // 获取token\n  token.value = uni.getStorageSync('token');\n\n  if (!token.value && !nickName.value) {\n    uni.navigateTo({\n      url: '/pages/login/index',\n    });\n  } else {\n    // 延时获取城市，防止城市未获取到\n    setTimeout(() => {\n      city.value = uni.getStorageSync('city');\n      if (city.value) {\n        getHomeServiceData();\n        getHotServeData();\n      }\n    }, 200);\n  }\n});\n\nconst toLogin = () => {\n  uni.navigateTo({\n    url: '/pages/login/index',\n  });\n};\n// 监听下拉刷新\nonPullDownRefresh(() => {\n  getHomeServiceData();\n  getHotServeData();\n});\n// 跳转到服务列表页面和服务详情页面\nconst toService = (val, number) => {\n  if (number === 1) {\n    wx.reLaunch({\n      url: '/pages/service/index',\n    });\n    uni.setStorageSync('activeId', val);\n  } else {\n    uni.navigateTo({\n      url: `/pages/service/components/airMaintenance?id=${val}`,\n    });\n  }\n};\n// 跳转到城市选择页面\nconst toCity = () => {\n  uni.navigateTo({\n    url: '/pages/city/index',\n  });\n};\n// 跳转到评价页面\nconst toEvaluate = () => {\n  uni.navigateTo({\n    url: '/subPages/order/components/evaluate',\n  });\n};\n// 获取金刚区图标\nconst getHomeServiceData = async () => {\n  await getHomeService({\n    regionId: uni.getStorageSync('city').id,\n  }).then((res) => {\n    if (res.data.code === 200) {\n      menuData.value = res.data.data;\n    }\n  });\n};\n// 获取热门服务\nconst getHotServeData = async () => {\n  await getHotServe({\n    regionId: uni.getStorageSync('city').id,\n  }).then((res) => {\n    if (res.data.code === 200) {\n      hotData.value = res.data.data;\n    }\n  });\n};\n// 搜索\nconst handleSearch = () => {\n  uni.navigateTo({\n    url: `/pages/search/index`,\n  });\n};\n</script>\n<style src=\"./index.scss\" lang=\"scss\" scoped></style>\n","import MiniProgramPage from 'D:/class_project/jzo2o/jzo2o-front/jzo2o-consumer/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onShow","uni","onPullDownRefresh","wx","getHomeService","getHotServe"],"mappings":";;;;;;;;;;;;;AAwIA,MAAM,UAAU,MAAW;;;;AAC3B,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,QAAQA,cAAAA,IAAI,EAAE;AACpB,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AACtB,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,OAAOA,cAAAA,IAAI,CAAA,CAAE;AAEnBC,kBAAAA,OAAO,MAAM;AAEX,eAAS,QAAQC,cAAAA,MAAI,eAAe,UAAU;AAE9C,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AAExC,UAAI,CAAC,MAAM,SAAS,CAAC,SAAS,OAAO;AACnCA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QACX,CAAK;AAAA,MACL,OAAS;AAEL,mBAAW,MAAM;AACf,eAAK,QAAQA,cAAAA,MAAI,eAAe,MAAM;AACtC,cAAI,KAAK,OAAO;AACd;AACA;UACD;AAAA,QACF,GAAE,GAAG;AAAA,MACP;AAAA,IACH,CAAC;AAQDC,kBAAAA,kBAAkB,MAAM;AACtB;AACA;IACF,CAAC;AAED,UAAM,YAAY,CAAC,KAAK,WAAW;AACjC,UAAI,WAAW,GAAG;AAChBC,sBAAAA,KAAG,SAAS;AAAA,UACV,KAAK;AAAA,QACX,CAAK;AACDF,sBAAAA,MAAI,eAAe,YAAY,GAAG;AAAA,MACtC,OAAS;AACLA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,+CAA+C,GAAG;AAAA,QAC7D,CAAK;AAAA,MACF;AAAA,IACH;AAEA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAQA,UAAM,qBAAqB,YAAY;AACrC,YAAMG,+BAAe;AAAA,QACnB,UAAUH,cAAG,MAAC,eAAe,MAAM,EAAE;AAAA,MACzC,CAAG,EAAE,KAAK,CAAC,QAAQ;AACf,YAAI,IAAI,KAAK,SAAS,KAAK;AACzB,mBAAS,QAAQ,IAAI,KAAK;AAAA,QAC3B;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,kBAAkB,YAAY;AAClC,YAAMI,4BAAY;AAAA,QAChB,UAAUJ,cAAG,MAAC,eAAe,MAAM,EAAE;AAAA,MACzC,CAAG,EAAE,KAAK,CAAC,QAAQ;AACf,YAAI,IAAI,KAAK,SAAS,KAAK;AACzB,kBAAQ,QAAQ,IAAI,KAAK;AAAA,QAC1B;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjOA,GAAG,WAAW,eAAe;"}