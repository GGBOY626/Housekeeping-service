{"version":3,"file":"index.js","sources":["pages/service/index.vue","../../../../develop/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VydmljZS9pbmRleC52dWU"],"sourcesContent":["<!-- 全部服务列表 -->\r\n<template>\r\n  <view class=\"bg-wt service\">\r\n    <NavBar title=\"全部服务\" :isShowBack=\"false\"></NavBar>\r\n    <view class=\"servicePage\">\r\n      <view class=\"left\">\r\n        <view\r\n          v-for=\"(item, index) in serviceTypeData\"\r\n          :key=\"index\"\r\n          :class=\"activeId === item.serveTypeId ? 'active tagBox' : 'tagBox'\"\r\n          @click=\"tabChange(item.serveTypeId)\"\r\n        >\r\n          <view class=\"tag\">{{ item.serveTypeName }}</view>\r\n        </view>\r\n      </view>\r\n      <!-- 右边内容区域 -->\r\n      <view class=\"serviceBox right\">\r\n        <view>\r\n          <image :src=\"acitiveIdImg\" mode=\"scaleToFill\" class=\"cleanImg\" />\r\n          <view class=\"clean\">\r\n            <view\r\n              class=\"card\"\r\n              v-for=\"(item, index) in serviceItemData\"\r\n              :key=\"index\"\r\n              @click=\"handleDetail(item.id, item.serveItemName)\"\r\n            >\r\n              {{ item.serveItemName }}\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- footer -->\r\n    <UniFooter :pagePath=\"'/pages/service/index'\"></UniFooter>\r\n    <!-- end -->\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\nimport { getServeCategory, getServeList } from '../api/service.js';\r\n\r\nconst serviceTypeData = ref([]); // 服务类型数据\r\nconst activeId = ref(1); // 当前选中的id\r\nconst acitiveIdImg = ref(''); // 当前选中图片的地址\r\nconst serviceItemData = ref([]); // 服务项目数据\r\nconst city = ref({}); //城市\r\n// 切换侧边栏\r\nconst tabChange = (id) => {\r\n  activeId.value = id;\r\n  getServeListData();\r\n};\r\n\r\nconst handleDetail = (id, title) => {\r\n  uni.navigateTo({\r\n    url: `/pages/service/components/airMaintenance?id=${id}&title=${title}`,\r\n  });\r\n};\r\n// 获取服务分类数据\r\nconst getServeCategoryData = async () => {\r\n  await getServeCategory({\r\n    regionId: uni.getStorageSync('city').id,\r\n  }).then((res) => {\r\n    if (res.data.code === 200) {\r\n      serviceTypeData.value = res.data.data;\r\n      activeId.value = res.data.data[0]?.serveTypeId;\r\n      acitiveIdImg.value = res.data.data[0]?.serveTypeImg;\r\n      getServeListData();\r\n    }\r\n  });\r\n};\r\n// 获取服务项目数据\r\nconst getServeListData = async () => {\r\n  // 打印当前选中的id的类型\r\n  await getServeList({\r\n    cityCode: uni.getStorageSync('city').cityCode,\r\n    serveTypeId: activeId.value,\r\n  }).then((res) => {\r\n    if (res.data.code === 200) {\r\n      serviceItemData.value = res.data.data;\r\n      acitiveIdImg.value = serviceTypeData.value.filter(\r\n        (item) => item.serveTypeId === activeId.value\r\n      )[0].serveTypeImg;\r\n    }\r\n  });\r\n};\r\nonLoad(() => {\r\n  city.value = uni.getStorageSync('city');\r\n  if (city.value) {\r\n    getServeCategoryData();\r\n    if (uni.getStorageSync('activeId')) {\r\n      activeId.value = uni.getStorageSync('activeId');\r\n      // 清除缓存\r\n      uni.removeStorageSync('activeId');\r\n    }\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import url('@/styles/theme.scss');\r\n.service {\r\n  min-height: 100vh;\r\n\r\n  .servicePage {\r\n    display: flex;\r\n    min-height: 89.4vh;\r\n    padding-top: 22rpx;\r\n\r\n    .left {\r\n      width: 164rpx;\r\n      font-size: 28rpx;\r\n      flex-shrink: 0;\r\n      background: #f8f8f8;\r\n\r\n      .active {\r\n        font-family: PingFangSC-Medium;\r\n        font-weight: 700 !important;\r\n        font-size: 16px !important;\r\n        color: #f74145 !important;\r\n        background-color: #fff !important;\r\n        position: relative;\r\n\r\n        .tag {\r\n          color: #f74145 !important;\r\n          &:after {\r\n            content: '';\r\n            position: absolute;\r\n            width: 4rpx;\r\n            height: 40rpx;\r\n            left: 0;\r\n            background: #f74145;\r\n          }\r\n        }\r\n      }\r\n\r\n      .tagBox {\r\n        height: 112rpx;\r\n        font-family: PingFangSC-Regular;\r\n        font-weight: 400;\r\n        font-size: 14px;\r\n        color: #151515;\r\n        text-align: center;\r\n        line-height: 112rpx;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        // &:first-child {\r\n        //   height: 78rpx;\r\n        //   line-height: 78rpx;\r\n        //   display: block;\r\n        // }\r\n\r\n        .tag {\r\n          height: 44rpx;\r\n          line-height: 41rpx;\r\n        }\r\n      }\r\n    }\r\n\r\n    .serviceBox {\r\n      padding-left: 28rpx;\r\n      padding-right: 26rpx;\r\n\r\n      .cleanImg {\r\n        width: 532rpx;\r\n        height: 200rpx;\r\n        margin-bottom: 32rpx;\r\n      }\r\n\r\n      .clean {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        // 第二行和第一行对齐，不留空白\r\n        align-content: flex-start;\r\n\r\n        .card {\r\n          width: 164rpx;\r\n          box-sizing: border-box;\r\n          text-align: center;\r\n          padding: 14rpx 10rpx;\r\n          background: #f4f4f4;\r\n          margin-bottom: 20rpx;\r\n          font-family: PingFangSC-Regular;\r\n          font-weight: 400;\r\n          margin-right: 20rpx;\r\n          font-size: 29rpx;\r\n          color: #151515;\r\n\r\n          &:nth-child(3n) {\r\n            margin-right: 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/class_project/jzo2o/jzo2o-front/jzo2o-consumer/pages/service/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","getServeCategory","getServeList","onLoad"],"mappings":";;;;;;;;;;;AA2CA,UAAM,kBAAkBA,cAAAA,IAAI,CAAA,CAAE;AAC9B,UAAM,WAAWA,cAAAA,IAAI,CAAC;AACtB,UAAM,eAAeA,cAAAA,IAAI,EAAE;AAC3B,UAAM,kBAAkBA,cAAAA,IAAI,CAAA,CAAE;AAC9B,UAAM,OAAOA,cAAAA,IAAI,CAAA,CAAE;AAEnB,UAAM,YAAY,CAAC,OAAO;AACxB,eAAS,QAAQ;AACjB;IACF;AAEA,UAAM,eAAe,CAAC,IAAI,UAAU;AAClCC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,+CAA+C,EAAE,UAAU,KAAK;AAAA,MACzE,CAAG;AAAA,IACH;AAEA,UAAM,uBAAuB,YAAY;AACvC,YAAMC,mCAAiB;AAAA,QACrB,UAAUD,cAAG,MAAC,eAAe,MAAM,EAAE;AAAA,MACzC,CAAG,EAAE,KAAK,CAAC,QAAQ;;AACf,YAAI,IAAI,KAAK,SAAS,KAAK;AACzB,0BAAgB,QAAQ,IAAI,KAAK;AACjC,mBAAS,SAAQ,SAAI,KAAK,KAAK,CAAC,MAAf,mBAAkB;AACnC,uBAAa,SAAQ,SAAI,KAAK,KAAK,CAAC,MAAf,mBAAkB;AACvC;QACD;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,mBAAmB,YAAY;AAEnC,YAAME,+BAAa;AAAA,QACjB,UAAUF,cAAG,MAAC,eAAe,MAAM,EAAE;AAAA,QACrC,aAAa,SAAS;AAAA,MAC1B,CAAG,EAAE,KAAK,CAAC,QAAQ;AACf,YAAI,IAAI,KAAK,SAAS,KAAK;AACzB,0BAAgB,QAAQ,IAAI,KAAK;AACjC,uBAAa,QAAQ,gBAAgB,MAAM;AAAA,YACzC,CAAC,SAAS,KAAK,gBAAgB,SAAS;AAAA,UAChD,EAAQ,CAAC,EAAE;AAAA,QACN;AAAA,MACL,CAAG;AAAA,IACH;AACAG,kBAAAA,OAAO,MAAM;AACX,WAAK,QAAQH,cAAAA,MAAI,eAAe,MAAM;AACtC,UAAI,KAAK,OAAO;AACd;AACA,YAAIA,cAAG,MAAC,eAAe,UAAU,GAAG;AAClC,mBAAS,QAAQA,cAAAA,MAAI,eAAe,UAAU;AAE9CA,8BAAI,kBAAkB,UAAU;AAAA,QACjC;AAAA,MACF;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChGD,GAAG,WAAW,eAAe;"}