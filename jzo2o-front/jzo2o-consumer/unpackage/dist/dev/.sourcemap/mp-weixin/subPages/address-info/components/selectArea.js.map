{"version":3,"file":"selectArea.js","sources":["subPages/address-info/components/selectArea.vue","../../../../develop/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovY2xhc3NfcHJvamVjdC9qem8yby9qem8yby1mcm9udC9qem8yby1jb25zdW1lci9zdWJQYWdlcy9hZGRyZXNzLWluZm8vY29tcG9uZW50cy9zZWxlY3RBcmVhLnZ1ZQ"],"sourcesContent":["<!-- 选择省市区弹窗 -->\r\n<template>\r\n  <view class=\"selectArea\">\r\n    <uni-popup ref=\"popup\" type=\"bottom\" mask-background-color=\"rgba(0,0,0,0.6)\">\r\n      <view class=\"header\">\r\n        <view class=\"line\">\r\n          <view class=\"header-title\">选择省市区</view>\r\n          <view class=\"close\" @click=\"handleCancel\"></view>\r\n        </view>\r\n      </view>\r\n      <!-- 省市区三级联动 -->\r\n      <view class=\"province-city-area\">\r\n        <view class=\"label-box\">\r\n          <view class=\"label\">省份</view>\r\n          <view class=\"label\">城市</view>\r\n          <view class=\"label\">区县</view>\r\n        </view>\r\n        <picker-view\r\n          :value=\"areaIndex.data\"\r\n          indicator-class=\"picker-view-indicator\"\r\n          @change=\"bindChange\"\r\n          @pickstart=\"handlePickStart\"\r\n          mask-class=\"picker-view-mask\"\r\n          class=\"picker-view\"\r\n        >\r\n          <picker-view-column>\r\n            <view\r\n              :class=\"[\r\n                'item',\r\n                index === areaIndex.data[0] ? 'activeAddress' : '',\r\n              ]\"\r\n              v-for=\"(item, index) in province.data\"\r\n              :key=\"index\"\r\n              >{{ item.label }}</view\r\n            >\r\n          </picker-view-column>\r\n          <picker-view-column>\r\n            <view\r\n              :class=\"[\r\n                'item',\r\n                index === areaIndex.data[1] ? 'activeAddress' : '',\r\n              ]\"\r\n              v-for=\"(item, index) in city.data\"\r\n              :key=\"index\"\r\n              >{{ item.label }}</view\r\n            >\r\n          </picker-view-column>\r\n          <picker-view-column>\r\n            <view\r\n              :class=\"[\r\n                'item',\r\n                index === areaIndex.data[2] ? 'activeAddress' : '',\r\n              ]\"\r\n              v-for=\"(item, index) in area.data\"\r\n              :key=\"index\"\r\n              >{{ item.label }}</view\r\n            >\r\n          </picker-view-column>\r\n        </picker-view>\r\n      </view>\r\n      <!-- 底部 -->\r\n      <view class=\"footer\">\r\n        <view class=\"btn\" @click=\"confirm\">确定</view>\r\n      </view>\r\n    </uni-popup>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, watch } from 'vue';\r\nimport { defineProps, defineEmits, defineExpose } from 'vue';\r\nimport { provinceData } from '../../../utils/address/province';\r\nimport { cityData } from '../../../utils/address/city.js';\r\nimport { areaData } from '../../../utils/address/area.js';\r\nconst emits = defineEmits(['@getAreaData']);\r\nconst popup = ref();\r\nlet props = defineProps({\r\n  provinceName: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  cityName: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  countyName: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n});\r\n//省数据\r\nconst province = reactive({\r\n  // data的值是一个数组，为provinceData中的数据\r\n  data: provinceData,\r\n});\r\nlet selectedProvince = reactive({\r\n  data: {\r\n    label: '北京',\r\n    value: '11',\r\n  },\r\n});\r\n//市数据\r\nconst city = reactive({\r\n  data: [],\r\n});\r\nlet selectedCity = reactive({\r\n  data: {\r\n    label: '北京市',\r\n    value: '1101',\r\n  },\r\n});\r\n//区域数据\r\nconst area = reactive({\r\n  data: [],\r\n});\r\nlet selectedArea = reactive({\r\n  data: {\r\n    label: '东城区',\r\n    value: '110101',\r\n  },\r\n});\r\n//记录三级联动每项的index以及默认展示\r\nlet areaIndex = reactive({\r\n  data: [0, 0, 0],\r\n});\r\n\r\n//区分热门城市点击还是滑动三级组件\r\nlet chooseType = ref('select');\r\n\r\n// 监听后台获取的详情\r\nwatch(props, (newValue) => {\r\n  // 获取符合条件的省市区的index，下标\r\n  areaIndex.data[0] = provinceData?.findIndex((item) => {\r\n    return item.label == newValue.provinceName;\r\n  });\r\n  areaIndex.data[1] = cityData[areaIndex.data[0]].findIndex((item) => {\r\n    return item.label == newValue.cityName;\r\n  });\r\n  areaIndex.data[2] = areaData[areaIndex.data[0]][areaIndex.data[1]].findIndex(\r\n    (item) => {\r\n      return item.label == newValue.countyName;\r\n    }\r\n  );\r\n  city.data = cityData[areaIndex.data[0]];\r\n  area.data = areaData[areaIndex.data[0]][areaIndex.data[1]];\r\n});\r\nconst getList = () => {\r\n  city.data = cityData[areaIndex.data[0]];\r\n  area.data = areaData[areaIndex.data[0]][areaIndex.data[1]];\r\n};\r\n\r\n//获取省市区\r\n\r\nconst handlePickStart = () => {\r\n  chooseType.value = 'select';\r\n};\r\n\r\n//选择省市区\r\nconst bindChange = (event) => {\r\n  if (chooseType.value === 'click') return;\r\n  //二级地址获取\r\n  if (areaIndex.data[0] !== event.detail.value[0]) {\r\n    city.data = cityData[event.detail.value[0]];\r\n    area.data = areaData[event.detail.value[0]][event.detail.value[1]];\r\n    selectedProvince.data = province.data[event.detail.value[0]];\r\n    event.detail.value[1] = 0;\r\n    event.detail.value[2] = 0;\r\n    selectedCity.data = city.data[event.detail.value[1]];\r\n    selectedArea.data = area.data[event.detail.value[2]];\r\n  } else if (areaIndex.data[1] !== event.detail.value[1]) {\r\n    area.data = areaData[event.detail.value[0]][event.detail.value[1]];\r\n    event.detail.value[2] = 0;\r\n    selectedCity.data = city.data[event.detail.value[1]];\r\n    selectedArea.data = area.data[event.detail.value[2]];\r\n  } else {\r\n    selectedArea.data = area.data[event.detail.value[2]];\r\n  }\r\n  areaIndex.data = event.detail.value;\r\n};\r\n\r\n// 打开弹层\r\nconst handleOpen = () => {\r\n  popup.value.open('bottom');\r\n};\r\n// 关闭弹层\r\nconst handleCancel = () => {\r\n  popup.value.close('bottom');\r\n};\r\n\r\n//确认选择省市区\r\nconst confirm = () => {\r\n  handleCancel();\r\n  emits('getAreaData', {\r\n    province: selectedProvince.data,\r\n    city: selectedCity.data,\r\n    area: selectedArea.data,\r\n  });\r\n};\r\n// 暴漏给父组件\r\ndefineExpose({\r\n  handleOpen,\r\n  getList,\r\n});\r\n</script>\r\n\r\n<style src=\"./selectArea.scss\" lang=\"scss\" scoped></style>\r\n","import Component from 'D:/class_project/jzo2o/jzo2o-front/jzo2o-consumer/subPages/address-info/components/selectArea.vue'\nwx.createComponent(Component)"],"names":["ref","reactive","provinceData","watch","cityData","areaData"],"mappings":"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"}