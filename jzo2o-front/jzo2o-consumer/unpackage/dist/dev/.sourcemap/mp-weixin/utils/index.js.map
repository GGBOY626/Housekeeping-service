{"version":3,"file":"index.js","sources":["utils/index.js"],"sourcesContent":["// 获取年月时、分\r\nexport const taskTimeFormat = (val) => {\r\n  const times = getTimeDate(val)\r\n  return times.date\r\n}\r\n// 获取时、分\r\nexport const overTimeFormat = (val) => {\r\n  const times = getTimeDate(val)\r\n  return times.times\r\n}\r\n// 时间格式化\r\nexport const getTimeDate = (val) => {\r\n  const date = new Date(val);\r\n  date.setTime(date.getTime() + 3600000)\r\n  //年 getFullYear()：四位数字返回年份\r\n  const year = date.getFullYear(); //getFullYear()代替getYear()\r\n  //月 getMonth()：0 ~ 11\r\n  const month = date.getMonth() + 1;\r\n  //日 getDate()：(1 ~ 31)\r\n  const day = date.getDate();\r\n  //时 getHours()：(0 ~ 23)\r\n  const hour = date.getHours();\r\n  //分 getMinutes()： (0 ~ 59)\r\n  const minute = date.getMinutes();\r\n  //秒 getSeconds()：(0 ~ 59)\r\n  const second = date.getSeconds()\r\n  const time = {\r\n    date: addZero(month) + '-' + addZero(day) + ' ' + addZero(hour) + ':' + addZero(minute),\r\n    times: addZero(hour) + ':' + addZero(minute),\r\n    veryDayDate: addZero(year) + '-' + addZero(month) + '-' + addZero(day) + ' ' + '00' + ':' + '00' + ':' +\r\n      '00',\r\n  }\r\n  return time\r\n}\r\n\r\n// 获取处理当前日期，时分秒以00:00:00显示\r\nexport const getTate = (val) => {\r\n  let date = new Date(val);\r\n  const year = date.getFullYear(); //getFullYear()代替getYear()\r\n  //月 getMonth()：0 ~ 11\r\n  const month = date.getMonth() + 1;\r\n  //日 getDate()：(1 ~ 31)\r\n  const day = date.getDate();\r\n  const m = addZero(year) + '-' + addZero(month) + '-' + addZero(day) + ' ' + '00' + ':' + '00' + ':' +\r\n    '00';\r\n  return m\r\n}\r\n// 格式化触发的当前时间\r\nexport const getNow = (val) => {\r\n  let date = new Date(val);\r\n  let y = date.getFullYear();\r\n  let m = date.getMonth() + 1;\r\n  let d = date.getDate();\r\n  return m + \"月\" + d + '日';\r\n}\r\n// 前一天\r\nexport const preDay = (date) => {\r\n  let odata = new Date(new Date(date).getTime() - 24 * 60 * 60 * 1000); //计算当前日期 -1\r\n  return getTate(odata)\r\n}\r\n// 后一天\r\nexport const nextDay = (date) => {\r\n  let odata = new Date(new Date(date).getTime() + 24 * 60 * 60 * 1000); //计算当前日期 +1\r\n  return getTate(odata)\r\n}\r\n\r\n// 获取近30天数据\r\nexport const getDay = () => {\r\n  const times = timeList()\r\n  let arr = []\r\n  times.forEach((val) => {\r\n    const obj = getTate(val)\r\n    arr.push(obj)\r\n  })\r\n\r\n  return arr\r\n}\r\n// 获取当前日期、当月第一天，当月最后一天的时间戳，用来判断当前触发的时间是不是30天以内的时间\r\nexport const getMonthDay = (val) => {\r\n  const now = timeList()\r\n  // // 当天的时间戳\r\n  const timeNow = Date.parse(val);\r\n  // // 当月第一天时间戳\r\n  const timeStar = Date.parse(now[0]);\r\n  // // 当月最后一天时间戳\r\n  const timeEnd = Date.parse(now[now.length - 1]);\r\n  const times = {\r\n    timeNow: timeNow,\r\n    timeStar: timeStar,\r\n    timeEnd: timeEnd\r\n  }\r\n  return times\r\n}\r\n// 文字字节数限制\r\nexport const validateTextLength = (value) => {\r\n\r\n  // 中文、中文标点、全角字符按1长度，英文、英文符号、数字按0.5长度计算\r\n  if (value != undefined) {\r\n    let cnReg = /([\\u4e00-\\u9fa5]|[\\u3000-\\u303F]|[\\uFF00-\\uFF60])/g\r\n    let mat = value.match(cnReg)\r\n    let length\r\n    if (mat) {\r\n      length = (mat.length + (value.length - mat.length) * 0.5)\r\n      return length\r\n    } else {\r\n      return value.length * 0.5\r\n    }\r\n  }\r\n\r\n}\r\n// 选择近30天时间\r\nexport const timeList = () => {\r\n  var thrityMonth = [];\r\n  for (var i = 0; i < 30; i++) {\r\n    thrityMonth.unshift(new Date(new Date().setDate(new Date().getDate() - i)).toLocaleDateString())\r\n  }\r\n  return thrityMonth\r\n}\r\n// 拨打电话\r\nexport const call = (val) => {\r\n  uni.makePhoneCall({\r\n    phoneNumber: val,\r\n    success (e) {\r\n      // console(e)\r\n    },\r\n    fail (e) {\r\n      // console(e)\r\n    }\r\n  })\r\n}\r\n\r\n//功能只展示不实现的提示\r\nexport const handleSecondQi = () => {\r\n  uni.showToast({\r\n    title: \"程序员哥哥正在实现中\",\r\n    icon: \"none\",\r\n    duration: 1000,\r\n  });\r\n}\r\n\r\nexport const handleTimeToStrTime = (time) => {\r\n  const newTime = time.replace(/-/g, '/')\r\n  return (new Date(newTime).getMonth() + 1 + '月') +\r\n    (new Date(newTime).getDate() + '日') + ' ' +\r\n    String(Number(new Date(newTime).getHours()) < 10 ? '0' + Number(new Date(newTime).getHours()) : Number(new Date(newTime).getHours())) + ':' +\r\n    String(Number(new Date(newTime).getMinutes()) < 10 ? '0' + Number(new Date(newTime).getMinutes()) : Number(new Date(newTime).getMinutes()))\r\n}\r\n\r\n//时间不足两位在前面补0\r\nexport const addZero = (s) => {\r\n  return s < 10 ? ('0' + s) : s;\r\n}\r\n// 获取时间段时分00:00\r\nexport const getTime = (val) => {\r\n  let date = new Date(val);\r\n  let h = date.getHours();\r\n  let min = date.getMinutes();\r\n  return addZero(h) + \":\" + addZero(min);\r\n}\r\n// 获取yyyy.mm.dd 00:00:00\r\nexport const getAllTime = (val) => {\r\n  let date = new Date(val);\r\n  let y = date.getFullYear();\r\n  let m = date.getMonth() + 1;\r\n  let d = date.getDate();\r\n  let h = date.getHours();\r\n  let min = date.getMinutes();\r\n  let sec = date.getSeconds();\r\n  return addZero(y) + \".\" + addZero(m) + \".\" + addZero(d) + ' ' + addZero(h) + \":\" + addZero(min) + \":\" + addZero(sec);\r\n}\r\n//获取当前日期到10后的数据\r\nexport const getData = () => {\r\n  const dates = {}\r\n  const years = [];\r\n\r\n  const months = [];\r\n\r\n  const days = [];\r\n  const date = new Date();\r\n  const year = date.getFullYear();\r\n  const month = date.getMonth() + 1;\r\n  const day = date.getDate();\r\n  let value = []\r\n  for (let i = year; i <= date.getFullYear() + 10; i++) {\r\n    years.push(i);\r\n  }\r\n  for (let i = 1; i <= 12; i++) {\r\n    months.push(i);\r\n  }\r\n  for (let i = 1; i <= 31; i++) {\r\n    days.push(i);\r\n  }\r\n  value = [9999, month - 1, day - 1]\r\n\r\n  return {\r\n    value,\r\n    years,\r\n    months,\r\n    days\r\n  }\r\n\r\n}\r\n// 将时分秒转为时间戳\r\nexport const timeToSec = (time) => {\r\n  if (time != null) {\r\n    let s = '';\r\n    let hour = time.split(':')[0];\r\n    let min = time.split(':')[1];\r\n    s = Number(hour) * 60 + Number(min);\r\n    return s;\r\n  }\r\n\r\n}\r\n// 获取年月日yyyy-mm-dd\r\nexport const getTateTime = (time) => {\r\n  const t = time.replace(/\\./g, '/');\r\n  return t\r\n}\r\n// 获取年月日时间戳\r\nexport const getTateSec = (time) => {\r\n  const times = getTateTime(time)\r\n  const sec = (new Date(times)).getTime()\r\n  return sec\r\n}\r\n\r\nexport const getTSec = (time) => {\r\n  const timeVal = time.split(\".\")\r\n  const date = new Date(time);\r\n  const year = timeVal[0];\r\n  const month = timeVal[1];\r\n  const day = timeVal[2];\r\n  return year + '/' + month + '/' + day\r\n}\r\n// 获取年月日时间戳\r\nexport const getDsec = (time) => {\r\n  const times = getTSec(time)\r\n  const sec = (new Date(times)).getTime()\r\n  return sec\r\n}\r\n//tost 弹层提示\r\nexport const tostTip = (val) => {\r\n  uni.showToast({\r\n    title: val,\r\n    icon: \"none\",\r\n    background: '#ffaa00',\r\n    duration: 1500,\r\n    position: \"bottom\"\r\n  });\r\n}\r\n// 钱数自动补充两位小数\r\nexport function decimalsReplenish (value) {\r\n  value = typeof value === 'string' ? Number(value) : value\r\n  if (!value) return '0.00'\r\n\r\n  value = value.toFixed(2)\r\n  const intPart = Math.trunc(value) // 获取整数部分\r\n  let intPartFormat = intPart.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,') // 将整数部分逢三一断\r\n  // 去除，分隔符\r\n  if (intPartFormat.indexOf(',') !== -1) {\r\n    intPartFormat = intPartFormat.split(',').join('')\r\n  }\r\n  let floatPart = '.00' // 预定义小数部分\r\n  const value2Array = value.split('.')\r\n  // =2表示数据有小数位\r\n  if (value2Array.length === 2) {\r\n    floatPart = value2Array[1].toString() // 拿到小数部分\r\n    if (floatPart.length === 1) {\r\n      return `${intPartFormat}.${floatPart}0`\r\n    }\r\n    return `${intPartFormat}.${floatPart}`\r\n  }\r\n  return intPartFormat + floatPart\r\n}\r\nlet times = null\r\n// 时间区间转化\r\nexport const formatDuring = (timestamp) => {\r\n  const hours = Math.floor(timestamp / (1000 * 60 * 60));\r\n  const minutes = Math.floor((timestamp % (1000 * 60 * 60)) / (1000 * 60));\r\n  const seconds = Math.floor((timestamp % (1000 * 60)) / 1000);\r\n\r\n  let result = \"\";\r\n  if (hours > 0) {\r\n    result += hours + \"小时\";\r\n  }\r\n  if (minutes > 0) {\r\n    result += minutes + \"分\";\r\n  }\r\n  if (seconds > 0) {\r\n    result += seconds + \"秒\";\r\n  }\r\n\r\n  return result;\r\n}\r\n// 时间戳转化为时分秒,用：分割\r\nexport const formatDuringToTime = (timestamp) => {\r\n  const hours = Math.floor(timestamp / (1000 * 60 * 60));\r\n  const minutes = Math.floor((timestamp % (1000 * 60 * 60)) / (1000 * 60));\r\n  const seconds = Math.floor((timestamp % (1000 * 60)) / 1000);\r\n\r\n  let result = \"\";\r\n  if (hours > 9) {\r\n    result += hours + \":\";\r\n  }else if (hours < 10 && hours > 0) {\r\n    result += '0' + hours + \":\";\r\n  }\r\n  \r\n  if (minutes > 9) {\r\n    result += minutes + \":\";\r\n  }else if (minutes < 10 && minutes > 0) {\r\n    result += '0' + minutes + \":\";\r\n  }else{\r\n    result += '00' + \":\";\r\n  }\r\n\r\n  if (seconds > 9) {\r\n    result += seconds;\r\n  }else if(seconds < 10 && seconds > 0){\r\n    result += '0' + seconds;\r\n  }else{\r\n    result += '00';\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// 将时间转化为时分格式\r\nexport const formatDateTimeToDateTimeString = (dateTime) => {\r\n  // 检查参数是否是有效的日期格式\r\n  if (!(dateTime instanceof Date)) {\r\n    dateTime = new Date(dateTime);\r\n  }\r\n  // 获取年、月、日、时、分\r\n  const year = dateTime.getFullYear();\r\n  const month = String(dateTime.getMonth() + 1).padStart(2, '0');\r\n  const day = String(dateTime.getDate()).padStart(2, '0');\r\n  const hour = String(dateTime.getHours()).padStart(2, '0');\r\n  const minute = String(dateTime.getMinutes()).padStart(2, '0');\r\n  // 拼接成年月日时分的字符串格式\r\n  const dateTimeString = `${year}-${month}-${day} ${hour}:${minute}`;\r\n  return dateTimeString;\r\n}\r\n// 时间往前或往后推移n个小时\r\nexport const laterTime = (time, hour , flag) => {\r\n  const date = new Date(time);\r\n  if(flag === 1){\r\n    const newDate = new Date(date.getTime() - hour * 60 * 60 * 1000);\r\n    return newDate\r\n  }else{\r\n    const newDate = new Date(date.getTime() + hour * 60 * 60 * 1000);\r\n    return newDate\r\n  }\r\n}\r\n// 将时间转化为时分秒格式\r\nexport const formatDateTimeToDateTimeStringSecond = (dateTime) => {\r\n  // 检查参数是否是有效的日期格式\r\n  if (!(dateTime instanceof Date)) {\r\n    dateTime = new Date(dateTime);\r\n  }\r\n  // 获取年、月、日、时、分\r\n  const year = dateTime.getFullYear();\r\n  const month = String(dateTime.getMonth() + 1).padStart(2, '0');\r\n  const day = String(dateTime.getDate()).padStart(2, '0');\r\n  const hour = String(dateTime.getHours()).padStart(2, '0');\r\n  const minute = String(dateTime.getMinutes()).padStart(2, '0');\r\n  const second = String(dateTime.getSeconds()).padStart(2, '0');\r\n  // 拼接成年月日时分的字符串格式\r\n  const dateTimeString = `${year}-${month}-${day} ${hour}:${minute}:${second}`;\r\n  return dateTimeString;\r\n}\r\n// 将时间转化为年月日格式\r\nexport const formatDateTimeToDateString = (dateTime) =>{\r\n  // 检查参数是否是有效的日期格式\r\n  if (!(dateTime instanceof Date)) {\r\n    throw new Error('Invalid date format.');\r\n  }\r\n  // 获取年、月、日\r\n  const year = dateTime.getFullYear();\r\n  const month = String(dateTime.getMonth() + 1).padStart(2, '0');\r\n  const day = String(dateTime.getDate()).padStart(2, '0');\r\n  // 拼接成年月日的字符串格式\r\n  const dateString = `${year}-${month}-${day}`;\r\n  return dateString;\r\n}\r\n// 比例折扣转化 \r\nexport const convertDiscountPercentageToNumber = (percentage) => {\r\n  // 数字除10，并将整数部分和小数部分分开，小数部分保留一位小数\r\n  const num = Number(percentage);\r\n  const dividedNum = num / 10;\r\n\r\n  // 提取整数部分和小数部分\r\n  const integerPart = Math.floor(dividedNum).toFixed(0).replace(/^\\s*|\\s*$/g, ''); //去除空格\r\n  const decimalPart = (dividedNum - integerPart).toFixed(1).replace(/(\\d+)\\.(\\d+)/, '.$2');\r\n  return {\r\n    integer: integerPart,\r\n    decimal: decimalPart,\r\n  };\r\n};\r\n\r\n"],"names":["uni"],"mappings":"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"}